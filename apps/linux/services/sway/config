# This file has been auto-generated by i3-config-wizard(1).
# It will not be overwritten, so edit it as you like.
#
# Should you change your keyboard layout some time, delete
# this file and re-run i3-config-wizard(1).
#

# i3 config file (v4)
#
# Please see https://i3wm.org/docs/userguide.html for a complete reference!

set $mod Mod4
set $wallpaper $HOME/.bg.png
set $locker swaylock -f -i $wallpaper

### Appearance and behavior
workspace_layout default
default_border none
default_floating_border pixel
popup_during_fullscreen smart
for_window [class=".*"] border pixoutput


### Output
output HDMI-A-1 res 1920x1080 position 0 0
output eDP-1 res 1920x1080 position 0 0


gaps inner 5
gaps outer 4
font pango:JetBrains Mono Bold 8


input type:touchpad {
        dwt enabled
        tap enabled
        natural_scroll disable
        pointer_accel 0.3
        accel_profile adaptive
}

input type:keyboard {
    xkb_layout us,ru
    xkb_options grp:alt_shift_toggle
}


exec --no-startup-id sudo reflector --latest 25  --sort rate --country Russia --save /etc/pacman.d/mirrorlist
exec --no-startup-id swaybg -i .bg.png -m fill
exec --no-startup-id asusctl anime gif -p ~/.bg.gif -l 0
exec --no-startup-id asusctl profile -f boost
exec --no-startup-id asusctl -k high
exec --no-startup-id brightnessctl s 255+
exec --no-startup-id wal -i ~/.bg.png
exec --no-startup-id syncthing
exec dbus-update-activation-environment --systemd DISPLAY WAYLAND_DISPLAY SWAYSOCK
exec mako --anchor bottom-right --default-timeout 6000
exec "hash dbus-update-activation-environment 2>/dev/null; \
     dbus-update-activation-environment --systemd WAYLAND_DISPLAY DISPLAY SSH_AUTH_SOCK SWAYSOCK; \
     systemctl --user import-environment WAYLAND_DISPLAY DISPLAY SSH_AUTH_SOCK SWAYSOCK; \
     systemctl --user start sway-session.target"
exec wal -i ~/.bg.png
exec "swayidle -w \
         timeout 300 swaylock -i .bg.png --effect-blur 2x3 --clock --indicator \
         timeout 600 swaymsg output * power off resume swaymsg output * power on \
         before-sleep swaylock -i .bg.png --effect-blur 2x3 --clock --indicator"

# Use pactl to adjust volume in PulseAudio.
set $refresh_i3status killall -SIGUSR1 i3status
bindsym XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +10%
bindsym XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -10%
bindsym XF86AudioMute exec --no-startup-id pactl set-sink-mute @DEFAULT_SINK@ toggle
bindsym XF86AudioMicMute exec --no-startup-id pactl set-source-mute @DEFAULT_SOURCE@ toggle
bindsym XF86MonBrightnessUp   exec --no-startup-id brightnessctl set 25+
bindsym XF86MonBrightnessDown exec --no-startup-id brightnessctl set 25-


# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod
# Disable the laptop screen when the lid is closed.
bindswitch --reload --locked lid:on output eDP-1 disable
bindswitch --reload --locked lid:off output eDP-1 enable


bindsym $mod+Return exec alacritty
bindsym $mod+q kill
bindsym $mod+d exec --no-startup-id "rofi -modi drun,run -show drun"

# alternatively, you can use the cursor keys:
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# alternatively, you can use the cursor keys:
bindsym $mod+Shift+Left move left 25px
bindsym $mod+Shift+Down move down 25px
bindsym $mod+Shift+Up move up 25px
bindsym $mod+Shift+Right move right 25px

bindsym $mod+h split h
bindsym $mod+v split v
bindsym $mod+Shift+t layout tabbed
bindsym $mod+Shift+s layout stacking
bindsym $mod+Shift+h layout toggle split

# enter fullscreen mode for the focused container
bindsym $mod+f fullscreen toggle

# toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle

### Screenshot
bindsym XF86Launch1 exec grim $(date +'%Y%m%d-%H%M%S.png')
bindsym Shift+XF86Launch1 exec grim -g "$(slurp)" $(date +'%Y%m%d-%H%M%S.png')

# Define names for default workspaces for which we configure key bindings later on.
# We use variables to avoid repeating the names in multiple places.
set $ws1 "1"
set $ws2 "2"
set $ws3 "3"
set $ws4 "4"
set $ws5 "5"
set $ws6 "6"
set $ws7 "7"
set $ws8 "8"
set $ws9 "9"
set $ws10 "10"

# switch to workspace
bindsym $mod+1 workspace number $ws1
bindsym $mod+2 workspace number $ws2
bindsym $mod+3 workspace number $ws3
bindsym $mod+4 workspace number $ws4
bindsym $mod+5 workspace number $ws5
bindsym $mod+6 workspace number $ws6
bindsym $mod+7 workspace number $ws7
bindsym $mod+8 workspace number $ws8
bindsym $mod+9 workspace number $ws9
bindsym $mod+0 workspace number $ws10

# move focused container to workspace
bindsym $mod+Shift+1 move container to workspace number $ws1
bindsym $mod+Shift+2 move container to workspace number $ws2
bindsym $mod+Shift+3 move container to workspace number $ws3
bindsym $mod+Shift+4 move container to workspace number $ws4
bindsym $mod+Shift+5 move container to workspace number $ws5
bindsym $mod+Shift+6 move container to workspace number $ws6
bindsym $mod+Shift+7 move container to workspace number $ws7
bindsym $mod+Shift+8 move container to workspace number $ws8
bindsym $mod+Shift+9 move container to workspace number $ws9
bindsym $mod+Shift+0 move container to workspace number $ws10

# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $mod+Shift+r reload

# resize window (you can also use the mouse for that)
mode "resize" {
        # same bindings, but for the arrow keys
        bindsym Left resize shrink width 20 px
        bindsym Down resize grow height 20 px
        bindsym Up resize shrink height 20 px
        bindsym Right resize grow width 20 px

        bindsym Return mode "default"
        bindsym Escape mode "default"
}

bindsym $mod+r mode "resize"

bar {
    font pango:JetBrains Mono 10
    position top
    status_command /home/nickihell/.cache/pypoetry/virtualenvs/i3_panel-lov4_m2S-py3.10/bin/i3pyblocks -c /home/nickihell/Workspace/Projects/pyblocks/main.py
}


bindsym $mod+x exec "waylogout \
	--hide-cancel \
	--screenshots \
	--font=Baloo 2 \
	--effect-blur=7x5 \
	--indicator-thickness=20 \
	--ring-color=888888aa \
	--inside-color=88888866 \
	--text-color=eaeaeaaa \
	--line-color=00000000 \
	--ring-selection-color=33cc33aa \
	--inside-selection-color=33cc3366 \
	--text-selection-color=eaeaeaaa \
	--line-selection-color=00000000 \
	--lock-command='swaylock -i .bg.png --effect-blur 2x3 --clock --indicator' \
	--logout-command='swaymsg exit' \
	--suspend-command='echo suspend' \
	--hibernate-command='echo hibernate' \
	--poweroff-command='shutdown now' \
	--reboot-command='reboot' \
	--switch-user-command='echo switch' \
	--selection-label"


# Gaps between containers
gaps inner 4
gaps outer 0

# Gaps between screen edges and containers
gaps left 0
gaps right 0
gaps top 0
gaps bottom 0
#gaps vertical 4

# Create only gaps if more then one container
smart_gaps on

#new_float none
default_border pixel 2
# Hide borders if there is only one child in a workspace or container
hide_edge_borders --i3 smart_no_gaps

# Display window as floating. Find out wayland app_id with "swaymsg -t get_tree | jq '.' | grep app_id" and xorg class with xprop
for_window [window_role = "pop-up"] floating enable
for_window [window_role = "bubble"] floating enable
for_window [window_role = "dialog"] floating enable
for_window [window_type = "dialog"] floating enable
for_window [window_role = "task_dialog"] floating enable
for_window [window_type = "menu"] floating enable
for_window [app_id = "floating"] floating enable
for_window [app_id = "floating_update"] floating enable, resize set width 1000px height 600px
for_window [class = "(?i)pinentry"] floating enable
for_window [app_id = "Yad"] floating enable
for_window [app_id = "yad"] floating enable
for_window [title = ".*kdbx - KeePass"] floating enable, resize set 1276px 814px
for_window [class = "KeePass2"] floating enable
for_window [app_id = "nm-connection-editor"] floating enable
for_window [class = "KeyStore Explorer"] floating enable
for_window [app_id = "virt-manager"] floating enable
for_window [app_id = "xfce-polkit"] floating enable
for_window [instance = "origin.exe"] floating enable
for_window [title = "About Mozilla Firefox"] floating enable
for_window [window_role = "About"] floating enable
# Kill Firefox sharing indicator. It opens as an own container. Does not kill functionality
for_window [title = "Firefox - Sharing Indicator"] kill
for_window [title = "Firefox — Sharing Indicator"] kill
for_window [app_id="firefox" title="Library"] floating enable, border pixel 1, sticky enable
for_window [app_id = "pavucontrol"] floating enable
for_window [app_id = "blueberry.py"] floating enable
#for_window [title = "Thunderbird Preferences"] floating enable
#for_window [name = "*Reminder"] floating enable
for_window [title = "Manage KeeAgent.*"] floating enable
for_window [title = "Page Info - .*"] floating enable
for_window [class = "ConkyKeyboard"] floating enable
for_window [class = "Gufw.py"] floating enable
for_window [app_id = "keepassxc"] floating enable, resize set 1276px 814px
for_window [app_id = "blueman-manager"] floating enable
for_window [title = "^Open File$"] floating enable
for_window [class = "^zoom$"] floating enable
for_window [app_id = "avizo-service"] border pixel 0, sticky toggle
no_focus [app_id="avizo-service"]
for_window [window_role = "GtkFileChooserDialog"] resize set 590 340
for_window [window_role = "GtkFiileChooserDialog"] move position center
for_window [app_id = "tlp-ui"] floating enable
for_window [title = "mpvfloat"] floating enable
for_window [title = ".*Kee - Mozilla Firefox"] floating enable
for_window [app_id = "nm-openconnect-auth-dialog"] floating enable
for_window [class = "davmail-DavGateway"] floating enable
for_window [title = "Open Database File"] floating enable
for_window [app_id = "evolution-alarm-notify"] floating enable
for_window [app_id = "gnome-calculator"] floating enable
for_window [title = "TeamSpeak 3"] floating enable
for_window [app_id="(?i)Thunderbird" title=".*Reminder"] floating enable
for_window [class = "ATLauncher"] floating enable
for_window [instance="lxappearance"] floating enable
for_window [app_id="pamac-manager"] floating enable
for_window [title="File Operation Progress"] floating enable, border pixel 1, sticky enable, resize set width 40 ppt height 30 ppt
for_window [title="nmtui"] floating enable
for_window [title="Save File"] floating enable
for_window [app_id="wdisplays"] floating enable
for_window [app_id="floating_shell_portrait"] floating enable, border pixel 1, sticky enable, resize set width 30 ppt height 40 ppt
for_window [app_id="floating_shell"] floating enable, border pixel 1, sticky enable
for_window [app_id = "qt5ct"] floating enable
for_window [app_id = "gnome-tweaks"] floating enable
for_window [class = "Bluetooth-sendto" instance = "bluetooth-sendto"] floating enable
for_window [window_role = "Preferences"] floating enable
for_window [title = "Picture in picture"] floating enable, sticky enable
for_window [app_id = "flameshot"] floating enable
for_window [title = "Firefox - Choose User Profile" ] floating enable

# Zoom
for_window [app_id="zoom"] floating enable
for_window [app_id="zoom" title="Choose ONE of the audio conference options"] floating enable
for_window [app_id="zoom" title="zoom"] floating enable
for_window [app_id="zoom" title="Zoom Meeting"] floating disable
for_window [app_id="zoom" title="Zoom - Free Account"] floating disable

# https://github.com/ValveSoftware/steam-for-linux/issues/1040
for_window [class="^Steam$" title="^Friends$"] floating enable
for_window [class="^Steam$" title="Steam - News"] floating enable
for_window [class="^Steam$" title=".* - Chat"] floating enable
for_window [class="^Steam$" title="^Settings$"] floating enable
for_window [class="^Steam$" title=".* - event started"] floating enable
for_window [class="^Steam$" title=".* CD key"] floating enable
for_window [class="^Steam$" title="^Steam - Self Updater$"] floating enable
for_window [class="^Steam$" title="^Screenshot Uploader$"] floating enable
for_window [class="^Steam$" title="^Steam Guard - Computer Authorization Required$"] floating enable
for_window [title="^Steam Keyboard$"] floating enable

# Scratchpad terminal
for_window [title="(?i)$criteria"] floating enable, move absolute position 1500px 100px, resize set 1200px 700px, move to scratchpad, mark $criteria

# Waybar Tooltips don't steel focus
no_focus [app_id="waybar"]
for_window [app_id="waybar" floating] {
    move position cursor
    move down 60px # adjust if some menus still don't fit
}

# Titlebars get resized when text with a different height gets picked up.
# This includes emoji and Hangul. This neat hack makes all titlebars higher.
# See https://github.com/swaywm/sway/issues/4992
for_window [title=".*"] title_format %title゜

# Tag xwayland windows with [X]
for_window [shell="xwayland"] title_format "<span>[X] %title゜</span>"
